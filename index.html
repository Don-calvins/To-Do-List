<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Love Letter Generator</title>
<style>
    /* Animated gradient background */
    @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    body {
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(-45deg, #ffe6e6, #ffcccc, #ffb3b3, #ff9999);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
        color: #800000;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        margin: 0;
        flex-direction: column;
        text-align: center;
        overflow: hidden;
        position: relative;
        padding: 20px;
    }

    h1 {
        margin-bottom: 20px;
        text-shadow: 1px 1px 5px #fff;
        font-size: 1.8rem;
    }

    input, button {
        padding: 12px;
        margin: 5px;
        border-radius: 8px;
        border: none;
        font-size: 1rem;
        width: 80%;
        max-width: 300px;
        box-sizing: border-box;
    }

    button {
        background-color: #ff4d4d;
        color: white;
        cursor: pointer;
        transition: 0.3s;
    }

    button:hover {
        background-color: #e60000;
    }

    .letter {
        margin-top: 20px;
        font-size: 1rem;
        white-space: pre-line;
        width: 90%;
        max-width: 350px;
        background: rgba(255, 240, 240, 0.95);
        padding: 15px;
        border-radius: 10px;
        box-shadow: 2px 2px 20px rgba(0,0,0,0.2);
        position: relative;
        z-index: 2;
        word-wrap: break-word;
    }

    /* Hearts animation */
    .heart {
        position: absolute;
        font-size: 1.2rem;
        animation: float 6s linear infinite;
        z-index: 1;
    }

    @keyframes float {
        0% { transform: translateY(100vh) scale(0.5); opacity: 0.5; }
        50% { opacity: 1; }
        100% { transform: translateY(-10vh) scale(1); opacity: 0; }
    }

    /* Responsive adjustments */
    @media (max-width: 480px) {
        h1 { font-size: 1.5rem; }
        input, button { width: 90%; font-size: 0.95rem; }
        .letter { font-size: 0.95rem; max-width: 90%; padding: 12px; }
        .heart { font-size: 1rem; }
    }
</style>
</head>
<body>

<h1>ðŸ’Œ Love Letter Generator ðŸ’Œ</h1>

<input type="text" id="name" placeholder="Her Name">
<input type="text" id="color" placeholder="Her Favorite Color">
<input type="text" id="memory" placeholder="Your Favorite Memory Together">
<br>
<button onclick="generateLetter()">Generate Letter</button>
<button id="downloadBtn" style="display:none;" onclick="downloadPDF()">ðŸ’¾ Download PDF</button>

<div class="letter" id="letter"></div>
<div id="hearts"></div>

<!-- html2pdf library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
// Generate floating hearts
function createHearts() {
    const hearts = document.getElementById('hearts');
    for (let i = 0; i < 15; i++) {
        const heart = document.createElement('div');
        heart.classList.add('heart');
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.animationDuration = 4 + Math.random() * 4 + 's';
        heart.textContent = 'â¤ï¸';
        hearts.appendChild(heart);
    }
}
createHearts();

function generateLetter() {
    const name = document.getElementById('name').value || "you";
    const color = document.getElementById('color').value || "beautiful";
    const memory = document.getElementById('memory').value || "our special time together";

    const message = `Dear ${name},\n\n` +
                    `Every time I think of you, I see the world in ${color}. ` +
                    `I will always treasure ${memory}. ` +
                    `You make every moment brighter, and I feel so lucky to have you in my life.\n\n` +
                    `Happy Valentine's Day! â¤ï¸\n\n` +
                    `Yours truly,\n[Your Name]`;

    const letterDiv = document.getElementById('letter');
    letterDiv.textContent = "";
    document.getElementById('downloadBtn').style.display = 'none';

    let i = 0;
    function typeWriter() {
        if (i < message.length) {
            letterDiv.textContent += message.charAt(i);
            i++;
            setTimeout(typeWriter, 30);
        } else {
            launchConfetti();
            document.getElementById('downloadBtn').style.display = 'inline-block';
        }
    }
    typeWriter();
}

// Simple confetti
function launchConfetti() {
    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.style.position = 'absolute';
        confetti.style.width = '8px';
        confetti.style.height = '8px';
        confetti.style.backgroundColor = ['#ff4d4d','#ffb3b3','#ff8080','#e60000'][Math.floor(Math.random()*4)];
        confetti.style.left = Math.random() * window.innerWidth + 'px';
        confetti.style.top = '0px';
        confetti.style.borderRadius = '50%';
        confetti.style.opacity = '0.8';
        confetti.style.transform = `rotate(${Math.random()*360}deg)`;
        confetti.style.zIndex = '3';
        document.body.appendChild(confetti);

        let top = 0;
        const fall = setInterval(() => {
            top += Math.random()*5 + 2;
            confetti.style.top = top + 'px';
            if(top > window.innerHeight) {
                confetti.remove();
                clearInterval(fall);
            }
        }, 20);
    }
}

// Download the letter as PDF
function downloadPDF() {
    const element = document.getElementById('letter');
    const opt = {
        margin:       0.5,
        filename:     'LoveLetter.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
    };
    html2pdf().set(opt).from(element).save();
}
</script>

</body>
</html>
